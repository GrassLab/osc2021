#ifndef UART_H
#define UART_H

#define UART_BASE_ADDR 0x7E20100

#define UART_DR_ADDR    (UART_BASE_ADDR + 0x0)
#define UART_RSRECR_ADDR (UART_BASE_ADDR + 0x4)
#define UART_FR_ADDR    (UART_BASE_ADDR + 0x18)
#define UART_ILPR_ADDR  (UART_BASE_ADDR + 0x20)
#define UART_IBRD_ADDR  (UART_BASE_ADDR + 0x24)
#define UART_FBRD_ADDR  (UART_BASE_ADDR + 0x28)
#define UART_CR_ADDR    (UART_BASE_ADDR + 0x30)
#define UART_IFLS_ADDR  (UART_BASE_ADDR + 0x34)
#define UART_IMSC_ADDR  (UART_BASE_ADDR + 0x38)
#define UART_RIS_ADDR   (UART_BASE_ADDR + 0x3c)
#define UART_MIS_ADDR   (UART_BASE_ADDR + 0x40)
#define UART_ICR_ADDR   (UART_BASE_ADDR + 0x44)
#define UART_DMACR_ADDR (UART_BASE_ADDR + 0x48)
#define UART_ITCR_ADDR  (UART_BASE_ADDR + 0x80)
#define UART_ITIP_ADDR  (UART_BASE_ADDR + 0x84)
#define UART_ITOP_ADDR  (UART_BASE_ADDR + 0x88)
#define UART_TDR_ADDR   (UART_BASE_ADDR + 0x8c)

#define uart(NAME) UART_ ## NAME ## _ADDR

#define AUX_IRQ_REG 0x3F215000
#define AUX_ENABLES_REG 0x3F215004
#define AUX_MU_IO_REG   0x3F215040
#define AUX_MU_IER_REG  0x3F215044
#define AUX_MU_IIR_REG  0x3F215048
#define AUX_MU_LCR_REG  0x3F21504C
#define AUX_MU_MCR_REG  0x3F215050
#define AUX_MU_LSR_REG  0x3F215054
#define AUX_MU_MSR_REG  0x3F215058
#define AUX_MU_SCRATCH  0x3F21505C
#define AUX_MU_CNTL_REG 0x3F215060
#define AUX_MU_STAT_REG 0x3F215064
#define AUX_MU_BAUD_REG 0x3F215068
#define AUX_SPI0_CNTL0_REG  0x3F215080
#define AUX_SPI0_CNTL1_REG  0x3F215084
#define AUX_SPI0_STAT_REG   0x3F215088
#define AUX_SPI0_IO_REG 0x3F215090
#define AUX_SPI0_PEEK_REG   0x3F215094
#define AUX_SPI1_CNTL0_REG  0x3F2150C0
#define AUX_SPI1_CNTL1_REG  0x3F2150C4
#define AUX_SPI1_STAT_REG   0x3F2150C8
#define AUX_SPI1_IO_REG 0x3F2150D0
#define AUX_SPI1_PEEK_REG   0x3F2150D4
#define aux(NAME) ((volatile unsigned int *)(AUX_ ## NAME ## _REG))

#define GPFSEL0_REG 0x3F200000
#define GPFSEL1_REG 0x3F200004
#define GPFSEL2_REG 0x3F200008
#define GPFSEL3_REG 0x3F20000C
#define GPFSEL4_REG 0x3F200010
#define GPFSEL5_REG 0x3F200014
#define GPPUD_REG 0x3F200094
#define GPPUDCLK0_REG 0x3F200098
#define regp(NAME) ((volatile unsigned int *)(NAME ## _REG))

void uart_init ();
void uart_sendc (char c);
void uart_send (char *str);
char uart_getc ();
void uart_getline (char *buffer, unsigned int size);

#endif
